## 6.2 数据中心

某些部署将需要管理跨多个数据中心的数据管道。我们推荐的方法是在每个数据中心中部署一个本地`Kafka`集群，每个数据中心中的应用程序实例仅与它们的本地集群交互并在集群之间进行镜像（有关如何执行此操作，请参阅镜像制造商工具上的文档）。
这种部署模式允许数据中心充当独立的实体，并允许我们集中管理和调整数据中心间的复制。即使数据中心间的链接不可用，这也可以使每个设施独立运行并进行操作：这种情况发生时，镜像就会落后，直到链接恢复时才恢复。

对于需要全局查看所有数据的应用程序，可以使用镜像来提供集群，这些集群具有从所有数据中心的本地集群镜像的聚合数据。这些聚合群集供需要完整数据集的应用程序读取。

这不是唯一可能的部署模式。可以通过WAN读取或写入远程Kafka群集，尽管显然这会增加获得群集所需的任何延迟。

`Kafka`自然会在生产者和消费者中批量处理数据，因此即使通过高延迟连接也可以实现高吞吐量。为此，尽管可能有必要使用`socket.send.buffer.bytes`和`socket.receive.buffer.bytes`配置增加生产者，消费者和代理的TCP套接字缓冲区大小。设置此方法的适当方法在此处记录。

通常不建议在高延迟链接上运行跨多个数据中心的单个 `Kafka`集群。对于`Kafka`写入和`ZooKeeper`写入，这都将导致非常高的复制延迟，并且如果位置之间的网络不可用，则`Kafka`和`ZooKeeper`都不会在所有位置保持可用。